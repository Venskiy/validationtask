# Валидация данных
### Лабораторная работа #1
[[презентация]](https://www.dropbox.com/s/oxyb0fkrilo7q8l/%D0%9B%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%201.pptx?dl=0) [[репозиторий]](https://github.com/Andrew414/validationtask)

## Условие (1)
Необходимо написать программу или скрипт, которые способы включить/выключить один из сетевых адаптеров в системе. У программы должен быть интерфейс командной строки, настройка должна проводиться через входные параметры:

_Путь к исполняемому файлу_|UID адаптера|Ключ
---------------------------|------------|----
`C:\firsttask.exe`|`{6F9619FF-8B86-D011-B42D-00CF4FC964FF} `|`-d`

Программа должна проверять входные параметры и должна корректно завершаться, если эти параметры ошибочны. Если аргументы в порядке, программа должна включать адаптер, UID которого был передан, если параметр 'ключ' равен `-e`, либо выключать его, если параметр равен `-d`.

###### Входные параметры
Параметр|Возможные значения
--------|------------------
UID адаптера|GUID/UUID адаптера с фигурными скобками в начале и в конце
Ключ|`-d` либо `-e`

###### Выходные данные
В случае успеха программа должна выводить на экран строчку `success`. В случае ошибки - строчку `err: <описание ошибки>`

###### Пример входных и выходных данных
Входные данные|Результат программы
--------------|-------------------
`app.exe {6F9619FF-8B86-D011-B42D-00CF4FC964FF} -e`|Адаптер включен, на экран напечатано `success`
`app.exe {6F9619FF-8B86-D011-B42D-00CF4FC964FF} -d`|Состояние сети не изменилось, на экран напечатано `err: admin rights required (0x5)`
`app.exe 6F9619FF-8B86-D011-B42D-00CF4FC964FF -d`|Состояние сети не изменилось, на экран напечатано `err: wrong guid format (0x10001)`
`app.exe {6F9619FF-8B86-D011-B42D-00CF4FC964FF} -enable`|Состояние сети не изменилось, на экран напечатано `err: wrong command (0x10003`

## Условие (2)
Необходимо написать программу или скрипт, которые способы изменять владельца и группу-владельца файла. У программы должен быть интерфейс командной строки, настройка должна проводиться через входные параметры:

_Путь к исполняемому файлу_|ID пользователя|Ключ|Путь к файлу
---------------------------|---------------|----|------------
`C:\firsttask.exe`|`S-1-5-21-1180699209-877415012-3182924384-500`|`-o`|`C:\text.txt`

Программа должна проверять входные параметры и должна корректно завершаться, если эти параметры ошибочны. Если аргументы в порядке, программа должна изменить владельца файла (аргумент 3), если параметр 'ключ' равен `-o`, либо группу-владельца файла, если параметр 'ключ' равен `-g`

###### Входные параметры
Параметр|Возможные значения
--------|------------------
ID пользователя|SID пользователя (Windows)
|UID пользователя (Unix)
Ключ|`-o` либо `-g`
Путь к файлу|Путь к файлу или папке на диске

###### Выходные данные
В случае успеха программа должна выводить на экран строчку `success`. В случае ошибки - строчку `err: <описание ошибки>`

###### Пример входных и выходных данных
Входные данные|Результат программы
--------------|-------------------
`./app 502 -o ~/.gitignore`|Владелец изменен, на экран напечатано `success`
`./app 0 -o ~/.gitignore`|Владелец не изменен, на экран напечатано `err: admin rights required (5)`
`./app root -g ~/.gitignore`|Группа-владелец не изменилась, на экран напечатано `err: wrong groupid format (-3)`
`./app 502 -group ~/.gitignore`|Группа-владелец не именилась, на экран напечатано `err: wrong command (-1)`

## Условие (3)
Необходимо написать программу или скрипт, которые способы проверять хеш файла. У программы должен быть интерфейс командной строки, настройка должна проводиться через входные параметры:

_Путь к исполняемому файлу_|Значение хеша|Алгоритм|Путь к файлу
---------------------------|-------------|--------|------------
`C:\firsttask.exe`|`48de50b5c2f315540d6adccdc9aaba10`|`-md5`|`C:\text.txt`

Программа должна проверять входные параметры и должна корректно завершаться, если эти параметры ошибочны. Если аргументы в порядке, программа должна вычислить md5-хеш, если параметр 'алгоритм' равен `-md5`, либо контрольную сумму crc32, если параметр 'алгоритм' равен `-crc32`, сравнить полученное значение с переданным параметром и вывести результат сравнения

###### Входные параметры
Параметр|Возможные значения
--------|------------------
Значение хеша|32 hex-символа, допускаются большие и маленькие буквы (md5)
|8 hex-символов, допускаются большие и маленькие буквы (crc32)
Алгоритмы|`-md5` либо `-crc32`
Путь к файлу|Путь к файлу на диске

###### Выходные данные
В случае успеха программа должна выводить на экран строчку `success`. В случае ошибки - строчку `err: <описание ошибки>`

###### Пример входных и выходных данных
Входные данные|Результат программы
--------------|-------------------
`./app ab028b19 -crc32 ~/1.txt`|Хеш проверен, на экран напечатано `success`
`./app 00000000 -crc32 ~/1.txt`|Хеш проверен, на экран напечатано `err: hashes don't match - 0x80000001`
`./app 00000000 -md5 ~/1.txt`|Хеш не проверен, на экран напечатано `err: wrong md5 format - 0x800008d5`
`./app 00000000 -crc32 ~/2.txt`|Хеш не проверен, на экран напечатано `err: file not found - 0x00000002`

### Дополнительная информация

###### GUID/UUID адаптера
128-битный уникальный идентификатор объекта в ОС. 

В ОС Windows обычно называется GUID и записывается в виде `{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}`, где `X` - шестнадцатиричная цифра. Возможны и другие способы записи GUID - шестнадцатиричные цифры могут быть строчными и прописными, кроме того, могут отсутствовать фигурные скобки. 

В Unix-подобных ОС как правило называется UUID и записывается в виде `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`.

Каждый сетевой интерфейс имеет свой UID, который не меняется без веских причин (например, при переустановке драйверов).

###### GUID сетевых адаптеров в Windows
GUID можно вычислить несколькими способами:
* Используя реестр
  * `HKEY_LOCAL_MACHINE` > `SOFTWARE` > `Microsoft` > `WindowsNT` > `CurrentVersion` > `NetworkCards`
  * Этот ключ хранит подключи, каждый из которых описывает одну сетевую карту.
  * Внутри подключа можно найти значение `ServiceName`, содержащее GUID.
  * Кроме того, GUIDы сетевых карт хранятся в других местах в реестре
* Используя командную строку
  * Для проводных интерфейсов команды `sc start dot3svc` и `netsh lan show interfaces`
  * Для беспроводных интерфейсов команды `sc start wlansvc` и `netsh wlan show interfaces`
  * Кроме того, есть другие способы узнать GUID сетевых адаптеров, используя командную строку или powershell

###### GUID сетевых адаптеров в Red Hat Linux
Необходимо парсить файлы в `/etc/sysconfig/network-scripts/`

Каждый файл содержит строку вида `UUID=<uuid>`

Пример:
```
DEVICE="eth1"
UUID=9c92fad9-6ecb-3e6c-eb4d-8a47c6f50c04
HWADDR=00:23:7D:32:4E:6E
```

###### GUID сетевых адаптеров в Debian Linux
Необходимо использовать команду `nmcli c list`

Пример:
```
NAME                      UUID                                   TYPE
Wired connection 2        d00a6778-80d6-4812-ad54-041de24e47fe   802-3-ethernet
Wired connection 1        4fb95570-1922-495a-b498-846b7a6b0655   802-3-ethernet
miwifi                    f3182ff5-81c2-44c4-9c4b-d3a1f0a550e9   802-11-wireless
```

###### GUID сетевых адаптеров в macOS
В macOS каждое сетевое соединение может иметь несколько UUID – по одному на каждую глобальную конфигурацию сети (которые можно легко переключать).
Текущая конфигурация указана под ключом `CurrentSet` в конфигурационном файле `/Library/Preferences/SystemConfiguration/preferences.plist`
В этой конфигурации, под ключом `Network/Global/IPv4/ServiceOrder` можно найти список всех UUID конфигурации без описаний.
Описания всех UUID сетевых подключений системы находится в том же самом файле под ключом NetworkServices.

###### SID в Windows
SID - структура данных переменной длины, идентифицирующая учетную запись
* пользователя
* группы
* компьютера
* домена
Есть несколько способок записи SID, основной из которых - в виде строки `S-1-X-XX-XXXXXXXXX-XXXXXXXXX-XXXXXXXXX-XXX`, где вместо X стоят десятичные цифры (XXXXXXXXX меньше 4 байт). С помощью WinAPI можно конвертировать строковое представление SID в бинарное и наоборот (функции `ConvertStringSidToSid` и `ConvertSidToStringSid`).

###### Users/Groups в Unix
Числовые значения, описывающие пользователя. Хранятся в файлах `/etc/passwd` - список пользователей и `/ect/group` - список групп. Кроме того, с помощью команды `id` можно узнать uid пользователя или группы по имени

Команда|Вывод команды
-------|-------------
id -u root|0
id -g nobody|4294967294
cat /etc/passwd|nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false
|root:*:0:0:System Administrator:/var/root:/bin/sh
|daemon:*:1:1:System Services:/var/root:/usr/bin/false
|...

###### Владение файлом в Windows
У каждого файла есть владелец и группа-владелец (owner/owner group). В Windows владельцы файла не участвуют в проверке прав доступа, они не отображаются в стандартном диалоге настройки доступа к файлу. Тем не менее, есть способы проверить владельца файла в Windows.
* ![ ](https://www.download3k.com/article_images/0/1405/large_3_28527ffb3ca783d735ab4e704e3564eb.png)
* ```wmic path Win32_LogicalFileSecuritySetting where Path="C:\\Users" ASSOC /RESULTROLE:Owner /ASSOCCLASS:Win32_LogicalFileOwner /RESULTCLASS:Win32_SID```


###### Владение файлом в Unix
У каждого файла есть владелец и группа-владелец, которые напрямую влияют на доступ к файлу. Из консоли владельца и группу владельца можно узнать с помощью команды `ls -la <path>`

Команда|Вывод команды
-------|-------------
`ls -la ~`|`drwxr-xr-x  13 andrew414414  staff    442 Oct 24 03:26 .git`

###### MD5 и CRC32
MD5 и CRC32 - простые алгоримты подсчета контрольных сумм (хеширования).
https://tools.ietf.org/html/rfc1321 
https://tools.ietf.org/html/rfc1952

MD5 генерирует 128-битный хеш (16 байт), CRC32 - 32-битный хеш (4 байта)


### Дополнительные требования
Программа должна быть написана с использованием общепринятого [**стандарта**](https://ru.wikipedia.org/wiki/Стандарт_оформления_кода). Если для выбранного языка есть один такой стандарт, используйте его, иначе выберите любой для своего языка программирования и укажите в комментариях к Pull Request, какой именно стандарт выбран.

### Дополнительные задания
Три задачи:
* Не использовать системные утилиты командной строки
  * Задача должна быть реализована с использованием нативных API
  * Запрещается запуск процессов, выполняющих 
    * настройку сетевого адаптера 
    * настройку прав, владельца и группы-владельца файлов
    * подсчет контрольных сумм/хешей файлов
* Выводить ошибки с кодом и подробным текстовым описанием
  * Вывод только кода ошибки либо только описания без кода не будет засчитан
* Добавить графический интерфейс
  * В графическом интерфейсе должна быть возможность выбора 
    * сетевого интерфейса и режима 'включение'/'выключение' (Условие 1)
    * пользователя/id пользователя, режима 'owner'/'owner group' и пути к файлу (Условие 2)
    * алгоритма `md5`/`crc32` и пути к файлу, кроме того, должна быть возможность ввести значение хеша и проверить его (Условие 3)
  * Должен отображаться результат (успешно/код ошибки)

### Репозиторий
[Репозиторий](https://github.com/Andrew414/validationtask) содержит главную страницу [`README.md`](https://github.com/Andrew414/validationtask/blob/master/README.rus.md) и девять персональных каталогов. Необходимо сделать копию (fork) репозитория и вносить все изменения только в свой персональный каталог. Все эти каталоги содержат пустой файл `.gitignore`, куда нужно вписать все временные файлы из лабораторной работы. Остальные файлы должны быть файлами кода (в т.ч. проекта).

### Сдача лабораторной работы
Можно выбрать любой язык программирования, IDE и фреймворки/библиотеки. Если для работы нужны какие-то нестандартные конфигурации или ПО, предоставьте инструкцию по настройке среды.

Сдача через **Pull Request** из вашего клонированного репозитория. Pull Request должен содержать код, файлы проекта и информационные файлы. Результаты сборок и временные файлы должны быть исключены из коммитов.

### Оценка
Максимум за лабораторную работу - **10 баллов**.
- **3 балла** за главную задачу
- **3 балла**, если работа сделана вовремя
- **2 балла** за реализацию лабораторной *без запуска сторонних процессов*
- **1 балл** за реализацию *информативных ошибок*
- **1 балл** за реализацию *графического интерфейса*

### Сроки
На выполнение лабораторной дается 4 недели (12 сентября - 10 октября). Лабораторная работа считается принятой, когда Pull Request переходит в состояние "approved". Дни, в течение которых лабораторная была на проверке, не учитываются.
![ ](https://i.snag.gy/lPOzf7.jpg)

Например, если вы сдаете лабораторную через три недели после выдачи (3 октября), но комментарии даны только через неделю (10 октября), у вас все еще будет неделя на устранение недочетов, все дни после коммита до получения ревью не считаются.

### Желаю удачи!
